{"ast":null,"code":"var _jsxFileName = \"D:\\\\KULIAH\\\\CODING\\\\MERN - MongoDB, Express, React, Node.js\\\\Toko Online - Own Project\\\\client\\\\src\\\\components\\\\user\\\\ProductUser.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { Link } from 'react-router-dom';\nimport jwt_decode from \"jwt-decode\";\nimport { numberFormat } from '../../helpers';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst ProductUser = () => {\n  _s();\n\n  const [token, setToken] = useState('');\n  const [expire, setExpire] = useState('');\n  const [products, setProducts] = useState([]);\n  useEffect(() => {\n    getProducts();\n  }, []);\n  const axiosJWT = axios.create();\n  axiosJWT.interceptors.request.use(async config => {\n    const currentDate = new Date();\n\n    if (expire * 1000 < currentDate.getTime()) {\n      const response = await axios.get('http://localhost:5000/api/token/');\n      config.headers.Authorization = `Bearer ${response.data.accessToken}`;\n      setToken(response.data.accessToken);\n      const decoded = jwt_decode(response.data.accessToken);\n      setExpire(decoded.exp);\n    }\n\n    return config;\n  }, error => {\n    return Promise.reject(error);\n  });\n\n  const getProducts = async () => {\n    const response = await axiosJWT.get(\"http://localhost:5000/api/product/\", {\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    });\n    setProducts(response.data);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: \"ProductUser\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 40,\n    columnNumber: 5\n  }, this);\n};\n\n_s(ProductUser, \"HSw7w6+iXJoc/rjgbFOK4+lc57o=\");\n\n_c = ProductUser;\nexport default ProductUser;\n\nvar _c;\n\n$RefreshReg$(_c, \"ProductUser\");","map":{"version":3,"names":["React","useState","useEffect","axios","Link","jwt_decode","numberFormat","ProductUser","token","setToken","expire","setExpire","products","setProducts","getProducts","axiosJWT","create","interceptors","request","use","config","currentDate","Date","getTime","response","get","headers","Authorization","data","accessToken","decoded","exp","error","Promise","reject"],"sources":["D:/KULIAH/CODING/MERN - MongoDB, Express, React, Node.js/Toko Online - Own Project/client/src/components/user/ProductUser.js"],"sourcesContent":["import React, {useState, useEffect} from 'react'\r\nimport axios from 'axios'\r\nimport {Link} from 'react-router-dom'\r\nimport jwt_decode from \"jwt-decode\"\r\nimport { numberFormat } from '../../helpers'\r\n\r\nconst ProductUser = () => {\r\n  const [token, setToken] = useState('')\r\n  const [expire, setExpire] = useState('')\r\n  const [products, setProducts] = useState([])\r\n\r\n  useEffect(()=>{\r\n    getProducts()\r\n  },[])\r\n\r\n  const axiosJWT = axios.create()\r\n  axiosJWT.interceptors.request.use(async(config) => {\r\n    const currentDate = new Date()\r\n    if (expire * 1000 < currentDate.getTime()) {\r\n      const response = await axios.get('http://localhost:5000/api/token/')\r\n      config.headers.Authorization = `Bearer ${response.data.accessToken}`\r\n      setToken(response.data.accessToken)\r\n      const decoded = jwt_decode(response.data.accessToken)\r\n      setExpire(decoded.exp)\r\n    }\r\n    return config\r\n  }, (error) => {\r\n    return Promise.reject(error)\r\n  })\r\n\r\n  const getProducts = async () => {\r\n    const response = await axiosJWT.get(\"http://localhost:5000/api/product/\", {\r\n      headers: {\r\n        Authorization: `Bearer ${token}`\r\n      }\r\n    })\r\n    setProducts(response.data)\r\n  }\r\n  return (\r\n    <div>ProductUser</div>\r\n  )\r\n}\r\n\r\nexport default ProductUser"],"mappings":";;;AAAA,OAAOA,KAAP,IAAeC,QAAf,EAAyBC,SAAzB,QAAyC,OAAzC;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAAQC,IAAR,QAAmB,kBAAnB;AACA,OAAOC,UAAP,MAAuB,YAAvB;AACA,SAASC,YAAT,QAA6B,eAA7B;;;AAEA,MAAMC,WAAW,GAAG,MAAM;EAAA;;EACxB,MAAM,CAACC,KAAD,EAAQC,QAAR,IAAoBR,QAAQ,CAAC,EAAD,CAAlC;EACA,MAAM,CAACS,MAAD,EAASC,SAAT,IAAsBV,QAAQ,CAAC,EAAD,CAApC;EACA,MAAM,CAACW,QAAD,EAAWC,WAAX,IAA0BZ,QAAQ,CAAC,EAAD,CAAxC;EAEAC,SAAS,CAAC,MAAI;IACZY,WAAW;EACZ,CAFQ,EAEP,EAFO,CAAT;EAIA,MAAMC,QAAQ,GAAGZ,KAAK,CAACa,MAAN,EAAjB;EACAD,QAAQ,CAACE,YAAT,CAAsBC,OAAtB,CAA8BC,GAA9B,CAAkC,MAAMC,MAAN,IAAiB;IACjD,MAAMC,WAAW,GAAG,IAAIC,IAAJ,EAApB;;IACA,IAAIZ,MAAM,GAAG,IAAT,GAAgBW,WAAW,CAACE,OAAZ,EAApB,EAA2C;MACzC,MAAMC,QAAQ,GAAG,MAAMrB,KAAK,CAACsB,GAAN,CAAU,kCAAV,CAAvB;MACAL,MAAM,CAACM,OAAP,CAAeC,aAAf,GAAgC,UAASH,QAAQ,CAACI,IAAT,CAAcC,WAAY,EAAnE;MACApB,QAAQ,CAACe,QAAQ,CAACI,IAAT,CAAcC,WAAf,CAAR;MACA,MAAMC,OAAO,GAAGzB,UAAU,CAACmB,QAAQ,CAACI,IAAT,CAAcC,WAAf,CAA1B;MACAlB,SAAS,CAACmB,OAAO,CAACC,GAAT,CAAT;IACD;;IACD,OAAOX,MAAP;EACD,CAVD,EAUIY,KAAD,IAAW;IACZ,OAAOC,OAAO,CAACC,MAAR,CAAeF,KAAf,CAAP;EACD,CAZD;;EAcA,MAAMlB,WAAW,GAAG,YAAY;IAC9B,MAAMU,QAAQ,GAAG,MAAMT,QAAQ,CAACU,GAAT,CAAa,oCAAb,EAAmD;MACxEC,OAAO,EAAE;QACPC,aAAa,EAAG,UAASnB,KAAM;MADxB;IAD+D,CAAnD,CAAvB;IAKAK,WAAW,CAACW,QAAQ,CAACI,IAAV,CAAX;EACD,CAPD;;EAQA,oBACE;IAAA;EAAA;IAAA;IAAA;IAAA;EAAA,QADF;AAGD,CAnCD;;GAAMrB,W;;KAAAA,W;AAqCN,eAAeA,WAAf"},"metadata":{},"sourceType":"module"}